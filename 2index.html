<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>30 Mejores Lugares para Bucear en México — Mapa Interactivo</title>

  <!-- Leaflet CSS -->
  <link
    rel="stylesheet"
    href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
    integrity="sha512-sA+q3Q0gP0s8kE6+6Hc2YlFZ+gGk3qA1Z6q+Vnqz5j1s1xV9s8k1g0g=="
    crossorigin=""
  />

  <style>
    :root {
      --navy: #001f3f;
      --accent: #116cb2;
      --muted: #f5f7fb;
      --card-bg: rgba(255,255,255,0.06);
    }

    html, body { height: 100%; margin: 0; }
    body {
      background: linear-gradient(180deg, var(--navy), #023b56);
      font-family: system-ui, sans-serif;
      color: #fff;
      overflow: hidden;
    }

    .container {
      display: flex;
      flex-direction: row;
      height: 100%;
    }

    .panel {
      width: 380px;
      max-width: 40%;
      background: rgba(255,255,255,0.05);
      border-right: 1px solid rgba(255,255,255,0.1);
      overflow-y: auto;
      padding: 20px;
    }

    #map {
      flex: 1;
      height: 100%;
    }

    h1 {
      font-size: 20px;
      margin: 0 0 10px;
      color: #fff;
    }

    .meta {
      font-size: 13px;
      opacity: 0.8;
      margin-bottom: 15px;
    }

    .search {
      width: 100%;
      padding: 8px;
      border-radius: 6px;
      border: none;
      outline: none;
      margin-bottom: 10px;
      background: rgba(255,255,255,0.1);
      color: white;
    }

    .filters {
      display: flex;
      gap: 8px;
      margin-bottom: 10px;
    }

    .btn {
      background: transparent;
      border: 1px solid rgba(255,255,255,0.3);
      color: white;
      padding: 6px 10px;
      border-radius: 6px;
      cursor: pointer;
      font-size: 13px;
    }

    .btn:hover {
      background: var(--accent);
    }

    .site-item {
      background: var(--card-bg);
      padding: 10px;
      border-radius: 8px;
      margin-bottom: 10px;
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .site-item:hover {
      transform: translateY(-3px);
      background: rgba(255,255,255,0.1);
    }

    .thumb {
      width: 100%;
      height: 100px;
      object-fit: cover;
      border-radius: 6px;
      margin-top: 6px;
    }

    .popup-card {
      width: 250px;
    }

    .popup-card img {
      width: 100%;
      height: 140px;
      object-fit: cover;
      border-radius: 6px;
      margin-bottom: 8px;
    }

    @media (max-width: 900px) {
      .container { flex-direction: column; }
      .panel { width: 100%; max-height: 40vh; }
      #map { height: 60vh; }
    }
  </style>
</head>

<body>
  <div class="container">
    <div class="panel">
      <h1>30 Mejores Lugares para Bucear en México</h1>
      <div class="meta">Explora los mejores destinos de buceo: Caribe, Pacífico y Cenotes.</div>

      <input id="search" class="search" placeholder="Buscar sitio o región..." />

      <div class="filters">
        <button class="btn" data-filter="all">Todos</button>
        <button class="btn" data-filter="Caribe">Caribe</button>
        <button class="btn" data-filter="Pacífico">Pacífico</button>
        <button class="btn" data-filter="Cenotes">Cenotes</button>
      </div>

      <div id="list"></div>
    </div>

    <div id="map"></div>
  </div>

  <!-- Leaflet JS -->
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

  <script>
    const SITES = [
      {name:'Cozumel', region:'Caribe', lat:20.42, lng:-86.92, desc:'Arrecifes con visibilidad excepcional.', img:'https://source.unsplash.com/600x400/?cozumel,reef'},
      {name:'Isla Mujeres', region:'Caribe', lat:21.23, lng:-86.73, desc:'Museo Subacuático MUSA.', img:'https://source.unsplash.com/600x400/?isla-mujeres,diving'},
      {name:'Cancún', region:'Caribe', lat:21.16, lng:-86.85, desc:'Arrecifes y estatuas submarinas.', img:'https://source.unsplash.com/600x400/?cancun,diving'},
      {name:'Akumal', region:'Caribe', lat:20.36, lng:-87.31, desc:'Famoso por tortugas marinas.', img:'https://source.unsplash.com/600x400/?akumal,turtle'},
      {name:'Banco Chinchorro', region:'Caribe', lat:18.6, lng:-87.64, desc:'Atolón remoto con naufragios.', img:'https://source.unsplash.com/600x400/?chinchorro,reef'},
      {name:'Tulum (Cenotes)', region:'Cenotes', lat:20.21, lng:-87.46, desc:'Cuevas y luz cenital mágica.', img:'https://source.unsplash.com/600x400/?tulum,cenote'},
      {name:'Cenote Dos Ojos', region:'Cenotes', lat:20.38, lng:-87.35, desc:'Sistema de cavernas famoso.', img:'https://source.unsplash.com/600x400/?dos-ojos,cenote'},
      {name:'Cenote Angelita', region:'Cenotes', lat:20.31, lng:-87.38, desc:'Efecto de río subacuático.', img:'https://source.unsplash.com/600x400/?angelita,cenote'},
      {name:'Cabo Pulmo', region:'Pacífico', lat:23.44, lng:-109.4, desc:'Único arrecife vivo del Pacífico.', img:'https://source.unsplash.com/600x400/?cabo-pulmo,reef'},
      {name:'La Paz', region:'Pacífico', lat:24.14, lng:-110.31, desc:'Lobos marinos y mantarrayas.', img:'https://source.unsplash.com/600x400/?la-paz,diving'},
      {name:'Islas Marietas', region:'Pacífico', lat:20.7, lng:-105.5, desc:'Formaciones rocosas y vida marina.', img:'https://source.unsplash.com/600x400/?marietas,islands'},
      {name:'Huatulco', region:'Pacífico', lat:15.85, lng:-96.13, desc:'Bahías protegidas con corales.', img:'https://source.unsplash.com/600x400/?huatulco,diving'},
      {name:'Isla Guadalupe', region:'Pacífico', lat:29.1, lng:-118.3, desc:'Tiburones blancos (jaula).', img:'https://source.unsplash.com/600x400/?guadalupe,shark'},
      {name:'Socorro (Revillagigedo)', region:'Pacífico', lat:18.84, lng:-112.9, desc:'Mantas y tiburones martillo.', img:'https://source.unsplash.com/600x400/?socorro,island,diving'},
      {name:'Loreto', region:'Pacífico', lat:26.01, lng:-111.34, desc:'Parque Marino protegido.', img:'https://source.unsplash.com/600x400/?loreto,diving'}
    ];

    const map = L.map('map').setView([23.6, -102.55], 5);
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
      maxZoom: 18,
      attribution: '© OpenStreetMap'
    }).addTo(map);

    const listEl = document.getElementById('list');
    const markers = [];

    SITES.forEach(site => {
      const marker = L.marker([site.lat, site.lng])
        .addTo(map)
        .bindPopup(`
          <div class="popup-card">
            <img src="${site.img}" alt="${site.name}" />
            <strong>${site.name}</strong><br>
            <small>${site.region}</small>
            <p>${site.desc}</p>
          </div>
        `);
      markers.push(marker);

      const item = document.createElement('div');
      item.className = 'site-item';
      item.innerHTML = `<strong>${site.name}</strong><br><small>${site.region}</small><img class="thumb" src="${site.img}" alt="${site.name}">`;
      item.addEventListener('click', () => {
        map.setView([site.lat, site.lng], 9);
        marker.openPopup();
      });
      item.dataset.region = site.region;
      item.dataset.name = site.name.toLowerCase();
      listEl.appendChild(item);
    });

    document.getElementById('search').addEventListener('input', e => {
      const q = e.target.value.toLowerCase();
      document.querySelectorAll('.site-item').forEach(i => {
        i.style.display = i.dataset.name.includes(q) ? 'block' : 'none';
      });
    });

    document.querySelectorAll('.btn').forEach(btn => {
      btn.addEventListener('click', () => {
        const f = btn.dataset.filter;
        document.querySelectorAll('.site-item').forEach(i => {
          i.style.display = (f === 'all' || i.dataset.region === f) ? 'block' : 'none';
        });
      });
    });

    map.scrollWheelZoom.disable();
  </script>
</body>
</html>
